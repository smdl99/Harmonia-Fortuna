<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <meta
      http-equiv="Content-Security-Policy"
      content="
default-src 'self';
script-src 'self' 'unsafe-inline';
style-src 'self' https://fonts.googleapis.com 'unsafe-inline';
font-src https://fonts.gstatic.com;
img-src 'self' data:;
object-src 'none';
base-uri 'self';
frame-ancestors 'none';
form-action 'self';
upgrade-insecure-requests;
"
    />

    <meta http-equiv="X-Content-Type-Options" content="nosniff" />
    <meta name="referrer" content="no-referrer" />

    <title>Harmonia Fortuna | Alternative Asset Management</title>
    <meta
      name="description"
      content="Harmonia Fortuna works alongside a select number of partners, focusing on differentiated opportunities, thoughtful execution, and long term alignment."
    />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@200;300;400&display=swap"
      rel="stylesheet"
    />
    <link
      rel="icon"
      href="public/HF Logo 32x32.png"
      sizes="32x32"
      type="image/png"
    />
    <link
      rel="icon"
      href="public/HF Logo.ico"
      type="image/x-icon"
      sizes="32x32"
    />
    <link rel="icon" href="public/HF Logo.svg" type="image/svg+xml" />

    <style>
      :root {
        --page-bg: #f6f6f6;
        --container-bg: #f9f9f9;
        --text: #000;
        --game: #000;
        --cursor: #777;
      }
      body.dark {
        --page-bg: #0f0f0f;
        --container-bg: #121212;
        --text: #fff;
        --game: #f2f2f2;
        --cursor: #aaa;
      }
      body {
        margin: 0;
        background: var(--page-bg);
        font-family: 'Inter', sans-serif;
        color: var(--text);
        transition: 0.4s;
        user-select: none;
      }
      body.rtl {
        direction: rtl;
      }

      .outer {
        min-height: 100vh;
        padding: clamp(4px, 1vw, 8px);
      }
      .inner {
        min-height: calc(100vh - clamp(8px, 2vw, 16px));
        background: linear-gradient(
          to bottom,
          var(--container-bg),
          rgba(0, 0, 0, 0.01)
        );
        border-radius: 18px;
        box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.015);
        display: flex;
        justify-content: center;
        align-items: center;
        position: relative;
        overflow: hidden;
      }

      .lang {
        position: absolute;
        top: clamp(18px, 3vh, 28px);
        right: clamp(18px, 3vw, 40px);
        font-size: clamp(9px, 1vw, 13px);
        opacity: 0.35;
      }
      body.rtl .lang {
        right: auto;
        left: clamp(18px, 3vw, 40px);
      }
      .lang span {
        margin-left: clamp(10px, 1.5vw, 16px);
        cursor: pointer;
      }

      .lang-fade-out {
        opacity: 0;
        transform: translateY(4px);
        transition:
          opacity 0.35s cubic-bezier(0.4, 0, 0.2, 1),
          transform 0.35s cubic-bezier(0.4, 0, 0.2, 1);
      }
      .lang-fade-in {
        opacity: 1;
        transform: translateY(0);
        transition:
          opacity 0.55s cubic-bezier(0.4, 0, 0.2, 1),
          transform 0.55s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .content {
        text-align: center;
        padding: 0 clamp(10px, 4vw, 40px);
      }

      canvas {
        width: min(260px, 40vw);
        max-width: 280px;
        aspect-ratio: 3/2;
        display: block;
        margin: 0 auto clamp(18px, 3vh, 26px);
      }

      .title {
        font-size: clamp(20px, 2.8vw, 30px);
        font-weight: 300;
        letter-spacing: 2px;
      }
      .subtitle {
        margin-top: clamp(8px, 2vh, 12px);
        font-size: clamp(12px, 1.4vw, 16px);
        opacity: 0.55;
      }
      .subtitle span {
        font-size: 1.15em;
        font-weight: 400;
      }

      .actions {
        position: absolute;
        bottom: clamp(40px, 6vh, 55px);
        left: 50%;
        transform: translateX(-50%);
        font-size: clamp(10px, 1vw, 11px);
        opacity: 0.6;
      }
      .actions span {
        margin: 0 clamp(4px, 1vw, 8px);
        cursor: pointer;
        position: relative;
      }
      .actions span::after,
      .footer span.clickable::after {
        content: '';
        position: absolute;
        left: 0;
        bottom: -2px;
        width: 0;
        height: 1px;
        background: currentColor;
        transition: 0.3s;
      }
      .actions span:hover::after,
      .footer span.clickable:hover::after {
        width: 100%;
      }

      .footer {
        position: absolute;
        bottom: clamp(14px, 3vh, 20px);
        left: 50%;
        transform: translateX(-50%);
        font-size: clamp(8px, 0.8vw, 11px);
        opacity: 0.26;
        text-align: center;
      }

      .footer span.clickable {
        margin: 0 clamp(4px, 1vw, 6px);
        cursor: pointer;
        position: relative;
      }

      .cursor-dot {
        position: fixed;
        width: 6px;
        height: 6px;
        border-radius: 50%;
        background: var(--cursor);
        pointer-events: none;
        transform: translate(-50%, -50%);
        z-index: 9999;
      }

      /* ===== MOBILE OPTIMIZATION (NO CODE REMOVED) ===== */
      @media (max-width: 600px) {
        .inner {
          padding: 12px;
        }

        canvas {
          width: 220px;
          max-width: 220px;
          margin-bottom: 18px;
        }

        .content {
          padding: 0 12px;
        }

        .footer {
          font-size: 10px;
          white-space: nowrap;
          bottom: 12px;
        }

        .actions {
          bottom: 65px;
        }
      }

      /* ===== AGGRESSIVE MOBILE FULL OPTIMIZATION (NO CODE REMOVED) ===== */
      @media (max-width: 600px) {
        .outer {
          padding: 2px !important;
          min-height: 100dvh !important;
        }

        .inner {
          min-height: calc(100dvh - 4px) !important;
          padding-top: 6px !important;
          padding-bottom: 6px !important;
          align-items: center !important;
        }

        .content {
          padding: 0 8px !important;
        }

        /* Make animation ~30% bigger but contained */
        canvas {
          width: 260px !important;
          max-width: 260px !important;
          margin-bottom: 12px !important;
        }

        .actions {
          bottom: 40px !important;
        }

        .footer {
          bottom: 6px !important;
          white-space: nowrap !important;
        }
      }
    </style>
  </head>
  <body>
    <div class="cursor-dot" id="cursor"></div>

    <div class="outer">
      <div class="inner">
        <div class="lang" id="langMenu">
          <span data-lang="en">EN</span>
          <span data-lang="cn">中文</span>
          <span data-lang="ru">RU</span>
          <span data-lang="ar">AR</span>
        </div>

        <div class="content">
          <canvas id="pong"></canvas>

          <div class="title">Harmonia Fortuna</div>
          <div class="subtitle" id="subtitle">
            <span>A</span>lternative <span>A</span>sset <span>M</span>anagement
          </div>

          <div class="actions">
            <span id="enterBtn">Enter</span>
            <span id="modeBtn">Dark Mode</span>
          </div>
        </div>

        <div class="footer">
          ©<span id="year"></span> Harmonia Fortuna |
          <span
            id="privacyBtn"
            class="clickable"
            onclick="window.location.href = 'privacy.html'"
            >Privacy Policy</span
          >
          |
          <span
            id="termsBtn"
            class="clickable"
            onclick="window.location.href = 'privacy.html'"
            >Terms of Service</span
          >
        </div>
      </div>
    </div>

    <script>
      'use strict';

      document.getElementById('year').textContent = new Date().getFullYear();

      document
        .getElementById('privacyBtn')
        .addEventListener(
          'click',
          () => (window.location.href = 'privacy.html'),
        );

      document
        .getElementById('termsBtn')
        .addEventListener('click', () => (window.location.href = 'terms.html'));

      const translations = {
        en: {
          subtitle:
            '<span>A</span>lternative <span>A</span>sset <span>M</span>anagement',
          enter: 'Enter',
          dark: 'Dark Mode',
          light: 'Light Mode',
          privacy: 'Privacy Policy',
          terms: 'Terms of Service',
        },
        cn: {
          subtitle: '<span>另</span>类 <span>资</span>产 <span>管</span>理',
          enter: '进入',
          dark: '深色模式',
          light: '浅色模式',
          privacy: '隐私政策',
          terms: '服务条款',
        },
        ru: {
          subtitle:
            '<span>А</span>льтернативное <span>У</span>правление <span>А</span>ктивами',
          enter: 'Войти',
          dark: 'Тёмный режим',
          light: 'Светлый режим',
          privacy: 'Конфиденциальность',
          terms: 'Условия',
        },
        ar: {
          subtitle:
            '<span>إ</span>دارة <span>الأ</span>صول <span>الب</span>ديلة',
          enter: 'الدخول',
          dark: 'الوضع الداكن',
          light: 'الوضع الفاتح',
          privacy: 'سياسة الخصوصية',
          terms: 'الشروط',
        },
      };

      let currentLang = 'en';

      function updateModeButton() {
        const modeBtn = document.getElementById('modeBtn');
        const t = translations[currentLang];
        modeBtn.textContent = document.body.classList.contains('dark')
          ? t.light
          : t.dark;
      }

      function setLang(lang) {
        currentLang = lang;

        const subtitle = document.getElementById('subtitle');
        const enterBtn = document.getElementById('enterBtn');
        const privacyBtn = document.getElementById('privacyBtn');
        const termsBtn = document.getElementById('termsBtn');

        const elements = [subtitle, enterBtn, privacyBtn, termsBtn];

        elements.forEach((el) => {
          el.classList.remove('lang-fade-in');
          el.classList.add('lang-fade-out');
        });

        setTimeout(() => {
          document.body.classList.toggle('rtl', lang === 'ar');
          document.documentElement.lang = lang;

          const t = translations[lang];

          subtitle.innerHTML = t.subtitle;
          enterBtn.textContent = t.enter;
          privacyBtn.textContent = t.privacy;
          termsBtn.textContent = t.terms;

          updateModeButton();

          elements.forEach((el) => {
            el.classList.remove('lang-fade-out');
            el.classList.add('lang-fade-in');
          });
        }, 200);
      }

      document.getElementById('langMenu').addEventListener('click', (e) => {
        if (e.target.dataset.lang) {
          setLang(e.target.dataset.lang);
        }
      });

      document.getElementById('modeBtn').addEventListener('click', () => {
        document.body.classList.toggle('dark');
        updateModeButton();
      });

      document
        .getElementById('enterBtn')
        .addEventListener('click', () => (window.location.href = 'menu.html'));

      setLang('en');

      /* Cursor */
      const cursor = document.getElementById('cursor');
      let cx = innerWidth / 2,
        cy = innerHeight / 2,
        tx = cx,
        ty = cy;
      addEventListener('mousemove', (e) => {
        tx = e.clientX;
        ty = e.clientY;
      });
      (function animateCursor() {
        cx += (tx - cx) * 0.15;
        cy += (ty - cy) * 0.15;
        cursor.style.left = cx + 'px';
        cursor.style.top = cy + 'px';
        requestAnimationFrame(animateCursor);
      })();

      /* Network animation unchanged */
      const canvas = document.getElementById('pong');
      const ctx = canvas.getContext('2d');
      canvas.width = 360;
      canvas.height = 240;

      const WIDTH = canvas.width;
      const HEIGHT = canvas.height;
      const NODE_COUNT = 8;
      const MAX_DIST = 170;
      const MAX_DIST_SQ = MAX_DIST * MAX_DIST;
      const LOOP_DURATION = 30000;

      const nodes = [];
      let mouse = { x: WIDTH / 2, y: HEIGHT / 2 };

      canvas.addEventListener('mousemove', (e) => {
        const rect = canvas.getBoundingClientRect();
        mouse.x = (e.clientX - rect.left) * (WIDTH / rect.width);
        mouse.y = (e.clientY - rect.top) * (HEIGHT / rect.height);
      });

      for (let i = 0; i < NODE_COUNT; i++) {
        nodes.push({
          ampX: 60 + Math.random() * 80,
          ampY: 45 + Math.random() * 70,
          freqX: 1 + Math.floor(Math.random() * 3),
          freqY: 1 + Math.floor(Math.random() * 3),
          phaseX: Math.random() * Math.PI * 2,
          phaseY: Math.random() * Math.PI * 2,
          x: WIDTH / 2,
          y: HEIGHT / 2,
          vx: 0,
          vy: 0,
        });
      }

      function animate(timestamp) {
        const progress = (timestamp % LOOP_DURATION) / LOOP_DURATION;
        const t = progress * Math.PI * 2;
        ctx.clearRect(0, 0, WIDTH, HEIGHT);

        const gameColor = getComputedStyle(document.body)
          .getPropertyValue('--game')
          .trim();

        for (const n of nodes) {
          const targetX = WIDTH / 2 + Math.sin(t * n.freqX + n.phaseX) * n.ampX;
          const targetY =
            HEIGHT / 2 + Math.cos(t * n.freqY + n.phaseY) * n.ampY;

          n.vx += (targetX - n.x) * 0.02;
          n.vy += (targetY - n.y) * 0.02;

          const dx = n.x - mouse.x;
          const dy = n.y - mouse.y;
          const dist = Math.sqrt(dx * dx + dy * dy);
          const radius = 120;

          if (dist > 0 && dist < radius) {
            const force = 1 - dist / radius;
            const strength = 2.0;
            n.vx += (dx / dist) * force * strength;
            n.vy += (dy / dist) * force * strength;
          }

          n.vx *= 0.9;
          n.vy *= 0.9;
          n.x += n.vx;
          n.y += n.vy;
        }

        for (let i = 0; i < nodes.length; i++) {
          for (let j = i + 1; j < nodes.length; j++) {
            const dx = nodes[i].x - nodes[j].x;
            const dy = nodes[i].y - nodes[j].y;
            const distSq = dx * dx + dy * dy;

            if (distSq < MAX_DIST_SQ) {
              const alpha = 0.28 * (1 - distSq / MAX_DIST_SQ);
              ctx.strokeStyle =
                gameColor === '#000'
                  ? `rgba(0,0,0,${alpha})`
                  : `rgba(242,242,242,${alpha})`;
              ctx.lineWidth = 1.2;
              ctx.beginPath();
              ctx.moveTo(nodes[i].x, nodes[i].y);
              ctx.lineTo(nodes[j].x, nodes[j].y);
              ctx.stroke();
            }
          }
        }

        ctx.fillStyle = gameColor;
        for (const n of nodes) {
          ctx.beginPath();
          ctx.arc(n.x, n.y, 4.2, 0, Math.PI * 2);
          ctx.fill();
        }

        requestAnimationFrame(animate);
      }
      requestAnimationFrame(animate);
    </script>
  </body>
</html>
